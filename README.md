# Top Analyzer

Tools to analyze the top snapshots, currently focusing on memory analyze.

## compare_top_mem.py 

Usage:
```
$ python3 compare_top_mem.py top/snapshots/top_20250107_1206.txt top/snapshots/top_20250107_1430.txt --show-new    
进程内存变化情况分析:
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PID      内存变化                 变化率(%)     原始内存                 现在内存                 命令行                                                         
         (KB/GB)                 (KB/GB)      (KB/GB)                                                                          
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3081     +419430.4K/+0.400G       +20.0 2097152.0K/2.000G    2516582.4K/2.400G    /usr/bin/ceph-osd -f --cluster ceph --id 10 --setuser ceph -
3086     -314572.8K/-0.300G       -13.0 2411724.8K/2.300G    2097152.0K/2.000G    /usr/bin/ceph-osd -f --cluster ceph --id 12 --setuser ceph -
2887302  +2496.0K                  +3.1 80704.0K/0.077G      83200.0K/0.079G      /lib/systemd/systemd-journald                               

新增进程列表:
-----------------------------------------------------------------------------------------
PID    Memory (KB) Memory (MB) Memory (GB) Command
-----------------------------------------------------------------------------------------
857564 4992.0      4.9         0.00        top -b -n 1 -c -e k -o -PID
857559 2496.0      2.4         0.00        /usr/sbin/CRON -f
857561 2496.0      2.4         0.00        /bin/bash /root/top/snapshot.sh
857379 1664.0      1.6         0.00        sleep 60
857560 832.0       0.8         0.00        /bin/sh -c /root/top/snapshot.sh
-----------------------------------------------------------------------------------------
```

## track_pid_mem.py

Usage: 
```bash
python3 track_pid_mem.py --data top/snapshots --pid 2911847 -o csv > 2911847.csv
```
